# SISMP v2 — Сервис управления студенческими проектами

Учебный проект, демонстрирующий базовые приёмы планирования и отслеживания командной работы.
Сервер написан на **Flask**, а интерфейс представляет собой набор статических HTML‑страниц.

## Содержание
- [Возможности](#Возможности)
- [Структура проекта](#Структура-проекта)
- [Требования](#Требования)
- [Установка](#Установка)
- [Запуск](#Запуск)
- [Веб-интерфейс](#Веб-интерфейс)
- [API](#API)
- [Вклад и разработка](#Вклад-и-разработка)
- [Лицензия](#Лицензия)

## Возможности
- учёт задач и прогресса выполнения;
- роли пользователей: *student*, *teacher*, *admin*;
- журнал рисков и событий;
- формирование отчётов (CSV/JSON/PDF);
- авторизация по JWT.

## Структура проекта
```
SISMP_v2/
├─ backend/          # Flask-приложение
│  ├─ app.py         # основной файл с API
│  ├─ auth.py        # обработчики регистрации и входа
│  ├─ models.py      # модели SQLAlchemy
│  ├─ requirements.txt
│  └─ static/        # HTML/JS/CSS интерфейса
├─ migrations/       # SQL-миграции (пример)
├─ SITEMAP.md        # описание разделов
└─ README.md
```

## Требования
- Python 3.12+
- virtualenv (рекомендуется)

## Установка
```bash
# 1. Клонируем репозиторий
git clone https://github.com/Odinzov/SISMP_v2.git
cd SISMP_v2/backend

# 2. Создаём и активируем виртуальное окружение
python3 -m venv venv
source venv/bin/activate

# 3. Ставим зависимости
pip install -r requirements.txt
```

## Запуск
```bash
python app.py
```
После старта сервер будет доступен на [http://localhost:5000](http://localhost:5000).

## Демо-данные
Для заполнения базы примерами предусмотрен скрипт `seed_data.py`.

```bash
python seed_data.py
```
После выполнения будут созданы учётные записи:

- **teamlead** (роль *teacher*, пароль `tlpass`)
- **alice** / `alicepass`
- **bob** / `bobpass`
- **charlie** / `charliepass`

При этом каждому студенту создаётся от трёх до пяти стартовых задач, чтобы интерфейс не был пустым.

## Веб-интерфейс
Файлы интерфейса лежат в каталоге `backend/static`.
Основные разделы:

| Путь | Назначение |
|------|------------|
| `/login` | Авторизация и регистрация |
| `/dashboard` | Рабочий стол студента |
| `/task/<id>` | Просмотр и комментарии задачи |
| `/calendar` | Персональный календарь |
| `/tl-dashboard` | Панель тимлида с фильтрами |
| `/task/edit/<id>` | Редактирование задачи |
| `/risk-log` | Список рисков |
| `/reports` | Формирование отчётов |
| `/profile` | Настройки пользователя |

Подробную карту можно найти в файле [SITEMAP.md](SITEMAP.md).

## API
Основные конечные точки расположены по префиксу `/api`.
Доступ защищается JWT‑токеном в заголовке `Authorization: Bearer <token>`.
Некоторые примеры:

- `POST /api/register` и `POST /api/login` — получение токена;
- `GET /api/tasks` — список задач;
- `PATCH /api/tasks/<id>` — обновление прогресса;
- `GET /api/risk-events` — перечень рисков;
- `GET /api/reports` — выгрузка отчётов (`fmt` = csv|json|pdf).

Код сервера достаточно компактный и может служить учебным образцом для собственных расширений.

### Как сформировать отчёт
1. Заполните базу командой `python seed_data.py`, чтобы появились примеры задач.
2. Запустите сервер: `python app.py` и войдите как **teamlead** (пароль `tlpass`).
3. Откройте страницу `/reports` в браузере.
4. Выберите период и тип отчёта, затем нажмите **CSV** или **PDF**.
   Файл будет скачан автоматически.

## Вклад и разработка
Пулл-реквесты приветствуются! Перед отправкой убедитесь, что проект собирается и выполняется без ошибок:
```bash
python -m py_compile ../*.py *.py 2>/dev/null
```

## Лицензия
Проект создан в учебных целях. Использование кода разрешено при указании авторства.
